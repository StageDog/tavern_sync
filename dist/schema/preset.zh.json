{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "设置": {
      "type": "object",
      "properties": {
        "上下文长度": {
          "description": "最大上下文 token 数. 酒馆计算出的上下文 token 数虚高, 容易在上下文 token 数没有达到限制时就报错, 因此建议调到最大 2000000",
          "type": "number",
          "minimum": 0,
          "maximum": 2000000
        },
        "最大回复token数": {
          "description": "最大回复 token 数",
          "type": "number",
          "minimum": 0
        },
        "每次回复数": {
          "description": "每次生成几个回复",
          "default": 1,
          "type": "number",
          "minimum": 1
        },
        "流式传输": {
          "description": "是否流式传输",
          "type": "boolean"
        },
        "温度": {
          "description": "温度",
          "type": "number",
          "minimum": 0,
          "maximum": 2
        },
        "频率惩罚": {
          "description": "频率惩罚",
          "type": "number",
          "minimum": -2,
          "maximum": 2
        },
        "存在惩罚": {
          "description": "存在惩罚",
          "type": "number",
          "minimum": -2,
          "maximum": 2
        },
        "top_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "重复惩罚": {
          "description": "重复惩罚",
          "default": 1,
          "type": "number",
          "minimum": 1,
          "maximum": 2
        },
        "min_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "top_k": {
          "type": "number",
          "minimum": 0,
          "maximum": 500
        },
        "top_a": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "种子": {
          "description": "种子, -1 表示随机",
          "default": -1,
          "type": "number"
        },
        "压缩系统消息": {
          "description": "压缩系统消息: 将连续的系统消息合并为一条消息",
          "type": "boolean"
        },
        "推理强度": {
          "description": "推理强度, 即内置思维链的投入程度. 例如, 如果酒馆直连 gemini-2.5-flash, 则`最小`将会不使用内置思维链",
          "type": "string",
          "enum": [
            "自动",
            "最小",
            "低",
            "中",
            "高",
            "最大"
          ]
        },
        "请求思维链": {
          "description": "请求思维链: 允许模型返回内置思维链的思考过程; 注意这只影响内置思维链显不显示, 不决定模型是否使用内置思维链",
          "default": true,
          "type": "boolean"
        },
        "请求图片": {
          "description": "请求图片: 允许模型在回复中返回图片",
          "default": true,
          "type": "boolean"
        },
        "启用函数调用": {
          "description": "启用函数调用: 允许模型使用函数调用功能; 比如 cursor 借此在回复中读写文件、运行命令",
          "default": true,
          "type": "boolean"
        },
        "启用网络搜索": {
          "description": "启用网络搜索: 允许模型使用网络搜索功能",
          "default": true,
          "type": "boolean"
        },
        "允许发送图片": {
          "description": "是否允许发送图片作为提示词",
          "default": "自动",
          "type": "string",
          "enum": [
            "禁用",
            "自动",
            "低",
            "高"
          ]
        },
        "允许发送视频": {
          "description": "是否允许发送视频作为提示词",
          "default": true,
          "type": "boolean"
        },
        "角色名称前缀": {
          "description": "角色名称前缀: 是否要为消息添加角色名称前缀, 以及怎么添加\n- 无: 不添加\n- 默认: 为与角色卡不同名的消息添加角色名称前缀, 添加到 `content` 字段开头 (即发送的消息内容是 `角色名: 消息内容`)\n- 内容: 为所有消息添加角色名称前缀, 添加到 `content` 字段开头 (即发送的消息内容是 `角色名: 消息内容`)\n- 补全: 在发送给模型时, 将角色名称写入到 `name` 字段; 仅支持字母数字和下划线, 不适用于 Claude、Google 等模型",
          "default": "无",
          "type": "string",
          "enum": [
            "无",
            "默认",
            "内容",
            "补全"
          ]
        },
        "用引号包裹用户消息": {
          "description": "用引号包裹用户消息: 在发送给模型之前, 将所有用户消息用引号包裹",
          "type": "boolean"
        }
      },
      "required": [
        "上下文长度",
        "最大回复token数",
        "流式传输",
        "温度",
        "频率惩罚",
        "存在惩罚",
        "top_p",
        "压缩系统消息",
        "推理强度"
      ],
      "additionalProperties": false
    },
    "锚点": {
      "description": "用于存放 YAML 锚点, 不会被实际使用",
      "type": "object",
      "propertyNames": {
        "type": "string"
      },
      "additionalProperties": {}
    },
    "提示词": {
      "description": "提示词列表里已经添加的提示词",
      "type": "array",
      "items": {
        "anyOf": [
          {
            "anyOf": [
              {
                "description": "手动在预设中添加的提示词",
                "type": "object",
                "properties": {
                  "名称": {
                    "type": "string"
                  },
                  "id": {
                    "not": {}
                  },
                  "启用": {
                    "type": "boolean"
                  },
                  "插入位置": {
                    "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                    "default": {
                      "类型": "相对"
                    },
                    "type": "object",
                    "properties": {
                      "类型": {
                        "type": "string",
                        "enum": [
                          "相对",
                          "聊天中"
                        ]
                      },
                      "深度": {
                        "type": "number"
                      },
                      "顺序": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "类型"
                    ],
                    "additionalProperties": false
                  },
                  "角色": {
                    "default": "系统",
                    "type": "string",
                    "enum": [
                      "系统",
                      "用户",
                      "AI"
                    ]
                  },
                  "内容": {
                    "description": "内嵌的提示词内容",
                    "type": "string"
                  },
                  "文件": {
                    "description": "外链的提示词文件路径",
                    "type": "string"
                  },
                  "额外字段": {
                    "description": "额外字段: 用于为预设提示词绑定额外数据",
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "名称",
                  "启用"
                ],
                "additionalProperties": false
              },
              {
                "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词",
                "type": "object",
                "properties": {
                  "名称": {
                    "not": {}
                  },
                  "id": {
                    "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词\n- 角色定义之前: world_info_before\n- 玩家描述: persona_description. 创建 user 时填写的提示词\n- 角色描述: char_description. 角色卡侧边栏中填写的提示词\n- 角色性格: char_personality. 角色卡高级定义中的提示词, 一般没人用了\n- 情景: scenario. 角色卡高级定义中的提示词, 一般没人用了\n- 角色定义之后: world_info_after\n- 对话示例: dialogue_examples. 角色卡高级定义中的提示词, 一般没人用了\n- 聊天记录: chat_history",
                    "type": "string",
                    "enum": [
                      "角色定义之前",
                      "玩家描述",
                      "角色描述",
                      "角色性格",
                      "情景",
                      "角色定义之后",
                      "对话示例",
                      "聊天记录"
                    ]
                  },
                  "启用": {
                    "type": "boolean"
                  },
                  "插入位置": {
                    "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                    "default": {
                      "类型": "相对"
                    },
                    "type": "object",
                    "properties": {
                      "类型": {
                        "type": "string",
                        "enum": [
                          "相对",
                          "聊天中"
                        ]
                      },
                      "深度": {
                        "type": "number"
                      },
                      "顺序": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "类型"
                    ],
                    "additionalProperties": false
                  },
                  "角色": {
                    "type": "string",
                    "enum": [
                      "系统",
                      "用户",
                      "AI"
                    ]
                  },
                  "内容": {
                    "not": {}
                  },
                  "文件": {
                    "not": {}
                  },
                  "额外字段": {
                    "description": "额外字段: 用于为预设提示词绑定额外数据",
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "id",
                  "启用"
                ],
                "additionalProperties": false
              }
            ]
          },
          {
            "$ref": "#/$defs/__schema0"
          }
        ]
      }
    },
    "未添加的提示词": {
      "description": "下拉框里的, 没有添加进提示词列表的提示词",
      "type": "array",
      "items": {
        "anyOf": [
          {
            "anyOf": [
              {
                "description": "手动在预设中添加的提示词",
                "type": "object",
                "properties": {
                  "名称": {
                    "type": "string"
                  },
                  "id": {
                    "not": {}
                  },
                  "启用": {
                    "type": "boolean"
                  },
                  "插入位置": {
                    "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                    "default": {
                      "类型": "相对"
                    },
                    "type": "object",
                    "properties": {
                      "类型": {
                        "type": "string",
                        "enum": [
                          "相对",
                          "聊天中"
                        ]
                      },
                      "深度": {
                        "type": "number"
                      },
                      "顺序": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "类型"
                    ],
                    "additionalProperties": false
                  },
                  "角色": {
                    "default": "系统",
                    "type": "string",
                    "enum": [
                      "系统",
                      "用户",
                      "AI"
                    ]
                  },
                  "内容": {
                    "description": "内嵌的提示词内容",
                    "type": "string"
                  },
                  "文件": {
                    "description": "外链的提示词文件路径",
                    "type": "string"
                  },
                  "额外字段": {
                    "description": "额外字段: 用于为预设提示词绑定额外数据",
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "名称",
                  "启用"
                ],
                "additionalProperties": false
              },
              {
                "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词",
                "type": "object",
                "properties": {
                  "名称": {
                    "not": {}
                  },
                  "id": {
                    "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词\n- 角色定义之前: world_info_before\n- 玩家描述: persona_description. 创建 user 时填写的提示词\n- 角色描述: char_description. 角色卡侧边栏中填写的提示词\n- 角色性格: char_personality. 角色卡高级定义中的提示词, 一般没人用了\n- 情景: scenario. 角色卡高级定义中的提示词, 一般没人用了\n- 角色定义之后: world_info_after\n- 对话示例: dialogue_examples. 角色卡高级定义中的提示词, 一般没人用了\n- 聊天记录: chat_history",
                    "type": "string",
                    "enum": [
                      "角色定义之前",
                      "玩家描述",
                      "角色描述",
                      "角色性格",
                      "情景",
                      "角色定义之后",
                      "对话示例",
                      "聊天记录"
                    ]
                  },
                  "启用": {
                    "type": "boolean"
                  },
                  "插入位置": {
                    "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                    "default": {
                      "类型": "相对"
                    },
                    "type": "object",
                    "properties": {
                      "类型": {
                        "type": "string",
                        "enum": [
                          "相对",
                          "聊天中"
                        ]
                      },
                      "深度": {
                        "type": "number"
                      },
                      "顺序": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "类型"
                    ],
                    "additionalProperties": false
                  },
                  "角色": {
                    "type": "string",
                    "enum": [
                      "系统",
                      "用户",
                      "AI"
                    ]
                  },
                  "内容": {
                    "not": {}
                  },
                  "文件": {
                    "not": {}
                  },
                  "额外字段": {
                    "description": "额外字段: 用于为预设提示词绑定额外数据",
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "id",
                  "启用"
                ],
                "additionalProperties": false
              }
            ]
          },
          {
            "$ref": "#/$defs/__schema0"
          }
        ]
      }
    },
    "扩展字段": {
      "description": "扩展字段: 用于为预设绑定额外数据"
    }
  },
  "required": [
    "设置",
    "提示词",
    "未添加的提示词"
  ],
  "additionalProperties": false,
  "$defs": {
    "__schema0": {
      "type": "object",
      "properties": {
        "文件夹": {
          "type": "string"
        },
        "条目": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "anyOf": [
                  {
                    "description": "手动在预设中添加的提示词",
                    "type": "object",
                    "properties": {
                      "名称": {
                        "type": "string"
                      },
                      "id": {
                        "not": {}
                      },
                      "启用": {
                        "type": "boolean"
                      },
                      "插入位置": {
                        "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                        "default": {
                          "类型": "相对"
                        },
                        "type": "object",
                        "properties": {
                          "类型": {
                            "type": "string",
                            "enum": [
                              "相对",
                              "聊天中"
                            ]
                          },
                          "深度": {
                            "type": "number"
                          },
                          "顺序": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "类型"
                        ],
                        "additionalProperties": false
                      },
                      "角色": {
                        "default": "系统",
                        "type": "string",
                        "enum": [
                          "系统",
                          "用户",
                          "AI"
                        ]
                      },
                      "内容": {
                        "description": "内嵌的提示词内容",
                        "type": "string"
                      },
                      "文件": {
                        "description": "外链的提示词文件路径",
                        "type": "string"
                      },
                      "额外字段": {
                        "description": "额外字段: 用于为预设提示词绑定额外数据",
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {}
                      }
                    },
                    "required": [
                      "名称",
                      "启用"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词",
                    "type": "object",
                    "properties": {
                      "名称": {
                        "not": {}
                      },
                      "id": {
                        "description": "预设提示词中的占位符提示词, 对应于世界书条目、角色卡、玩家角色、聊天记录等提示词\n- 角色定义之前: world_info_before\n- 玩家描述: persona_description. 创建 user 时填写的提示词\n- 角色描述: char_description. 角色卡侧边栏中填写的提示词\n- 角色性格: char_personality. 角色卡高级定义中的提示词, 一般没人用了\n- 情景: scenario. 角色卡高级定义中的提示词, 一般没人用了\n- 角色定义之后: world_info_after\n- 对话示例: dialogue_examples. 角色卡高级定义中的提示词, 一般没人用了\n- 聊天记录: chat_history",
                        "type": "string",
                        "enum": [
                          "角色定义之前",
                          "玩家描述",
                          "角色描述",
                          "角色性格",
                          "情景",
                          "角色定义之后",
                          "对话示例",
                          "聊天记录"
                        ]
                      },
                      "启用": {
                        "type": "boolean"
                      },
                      "插入位置": {
                        "description": "插入位置: `相对`则按提示词相对位置插入, `聊天中`则插入到聊天记录中的对应深度",
                        "default": {
                          "类型": "相对"
                        },
                        "type": "object",
                        "properties": {
                          "类型": {
                            "type": "string",
                            "enum": [
                              "相对",
                              "聊天中"
                            ]
                          },
                          "深度": {
                            "type": "number"
                          },
                          "顺序": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "类型"
                        ],
                        "additionalProperties": false
                      },
                      "角色": {
                        "type": "string",
                        "enum": [
                          "系统",
                          "用户",
                          "AI"
                        ]
                      },
                      "内容": {
                        "not": {}
                      },
                      "文件": {
                        "not": {}
                      },
                      "额外字段": {
                        "description": "额外字段: 用于为预设提示词绑定额外数据",
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {}
                      }
                    },
                    "required": [
                      "id",
                      "启用"
                    ],
                    "additionalProperties": false
                  }
                ]
              },
              {
                "$ref": "#/$defs/__schema0"
              }
            ]
          }
        }
      },
      "required": [
        "文件夹",
        "条目"
      ]
    }
  }
}