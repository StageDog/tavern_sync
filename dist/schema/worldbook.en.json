{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "anchors": {
      "description": "ç”¨äºå­˜æ”¾ YAML é”šç‚¹, ä¸ä¼šè¢«å®é™…ä½¿ç”¨"
    },
    "entries": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "uid": {
                "description": "è¯¥æ¡ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦, å¦‚æœä¸è®¾ç½®æˆ–æœ‰é‡å¤åˆ™ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªæ–°çš„",
                "type": "number"
              },
              "enabled": {
                "type": "boolean"
              },
              "strategy": {
                "description": "æ¿€æ´»ç­–ç•¥: æ¡ç›®åº”è¯¥ä½•æ—¶æ¿€æ´»",
                "type": "object",
                "properties": {
                  "type": {
                    "description": "æ¿€æ´»ç­–ç•¥ç±»å‹:\n- constant: å¸¸é‡ğŸ”µ, ä¿—ç§°è“ç¯. åªéœ€è¦æ»¡è¶³ \"å¯ç”¨\"ã€\"æ¿€æ´»æ¦‚ç‡%\" ç­‰åˆ«çš„è¦æ±‚å³å¯.\n- selective: å¯é€‰é¡¹ğŸŸ¢, ä¿—ç§°ç»¿ç¯. é™¤äº†è“ç¯æ¡ä»¶, è¿˜éœ€è¦æ»¡è¶³ `keys` æ‰«ææ¡ä»¶\n- vectorized: å‘é‡åŒ–ğŸ”—. ä¸€èˆ¬ä¸ä½¿ç”¨",
                    "type": "string",
                    "enum": [
                      "constant",
                      "selective",
                      "vectorized"
                    ]
                  },
                  "keys": {
                    "description": "å…³é”®å­—: ç»¿ç¯æ¡ç›®å¿…é¡»åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­æ‰«æåˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªå…³é”®å­—æ‰èƒ½æ¿€æ´»",
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "keys_secondary": {
                    "description": "æ¬¡è¦å…³é”®å­—: å¦‚æœè®¾ç½®äº†æ¬¡è¦å…³é”®å­—, åˆ™æ¡ç›®é™¤äº†åœ¨ `keys` ä¸­åŒ¹é…åˆ°ä»»æ„ä¸€ä¸ªå…³é”®å­—å¤–, è¿˜éœ€è¦æŒ‰æ¬¡è¦å…³é”®å­—çš„ `logic` æ»¡è¶³æ¬¡è¦å…³é”®å­—çš„ `keys`",
                    "type": "object",
                    "properties": {
                      "logic": {
                        "description": "æ¬¡è¦å…³é”®å­—é€»è¾‘:\n- and_any: æ¬¡è¦å…³é”®å­—ä¸­ä»»æ„ä¸€ä¸ªå…³é”®å­—èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- and_all: æ¬¡è¦å…³é”®å­—ä¸­æ‰€æœ‰å…³é”®å­—éƒ½èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- not_all: æ¬¡è¦å…³é”®å­—ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…³é”®å­—æ²¡èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- not_any: æ¬¡è¦å…³é”®å­—ä¸­æ‰€æœ‰å…³é”®å­—éƒ½æ²¡èƒ½æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°",
                        "type": "string",
                        "enum": [
                          "and_any",
                          "and_all",
                          "not_all",
                          "not_any"
                        ]
                      },
                      "keys": {
                        "minItems": 1,
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    "required": [
                      "logic",
                      "keys"
                    ],
                    "additionalProperties": false
                  },
                  "scan_depth": {
                    "description": "æ‰«ææ·±åº¦: 1 ä¸ºä»…æ‰«ææœ€åä¸€ä¸ªæ¥¼å±‚, 2 ä¸ºæ‰«ææœ€åä¸¤ä¸ªæ¥¼å±‚, ä»¥æ­¤ç±»æ¨",
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "same_as_global"
                      },
                      {
                        "type": "number",
                        "minimum": 1
                      }
                    ]
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              "position": {
                "type": "object",
                "properties": {
                  "type": {
                    "description": "æ’å…¥ä½ç½®ç±»å‹:\n- before_character_definition: è§’è‰²å®šä¹‰ä¹‹å‰\n- after_character_definition: è§’è‰²å®šä¹‰ä¹‹å\n- before_example_messages: ç¤ºä¾‹æ¶ˆæ¯ä¹‹å‰\n- after_example_messages: ç¤ºä¾‹æ¶ˆæ¯ä¹‹å\n- before_author_note: ä½œè€…æ³¨é‡Šä¹‹å‰\n- after_author_note: ä½œè€…æ³¨é‡Šä¹‹å\n- at_depth: æ’å…¥åˆ°æŒ‡å®šæ·±åº¦",
                    "type": "string",
                    "enum": [
                      "before_character_definition",
                      "after_character_definition",
                      "before_example_messages",
                      "after_example_messages",
                      "before_author_note",
                      "after_author_note",
                      "at_depth"
                    ]
                  },
                  "role": {
                    "description": "è¯¥æ¡ç›®çš„æ¶ˆæ¯èº«ä»½, ä»…ä½ç½®ç±»å‹ä¸º `'at_depth'` æ—¶æœ‰æ•ˆ",
                    "type": "string",
                    "enum": [
                      "system",
                      "assistant",
                      "user"
                    ]
                  },
                  "depth": {
                    "description": "è¯¥æ¡ç›®è¦æ’å…¥çš„æ·±åº¦, ä»…ä½ç½®ç±»å‹ä¸º `'at_depth'` æ—¶æœ‰æ•ˆ",
                    "type": "number"
                  },
                  "order": {
                    "type": "number"
                  }
                },
                "required": [
                  "type",
                  "order"
                ],
                "additionalProperties": false
              },
              "probability": {
                "type": "number",
                "minimum": 0,
                "maximum": 100
              },
              "recursion": {
                "description": "é€’å½’è¡¨ç¤ºæŸä¸–ç•Œä¹¦æ¡ç›®è¢«æ¿€æ´»å, è¯¥æ¡ç›®çš„æç¤ºè¯åˆæ¿€æ´»äº†å…¶ä»–æ¡ç›®",
                "type": "object",
                "properties": {
                  "prevent_incoming": {
                    "description": "ç¦æ­¢å…¶ä»–æ¡ç›®é€’å½’æ¿€æ´»æœ¬æ¡ç›®",
                    "type": "boolean"
                  },
                  "prevent_outgoing": {
                    "description": "ç¦æ­¢æœ¬æ¡ç›®é€’å½’æ¿€æ´»å…¶ä»–æ¡ç›®",
                    "type": "boolean"
                  },
                  "delay_until": {
                    "description": "å»¶è¿Ÿåˆ°ç¬¬ n çº§é€’å½’æ£€æŸ¥æ—¶æ‰èƒ½æ¿€æ´»æœ¬æ¡ç›®",
                    "anyOf": [
                      {
                        "type": "number",
                        "minimum": 1
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              },
              "effect": {
                "type": "object",
                "properties": {
                  "sticky": {
                    "description": "é»æ€§: æ¡ç›®æ¿€æ´»å, åœ¨ä¹‹å n æ¡æ¶ˆæ¯å†…å§‹ç»ˆæ¿€æ´», æ— è§†æ¿€æ´»ç­–ç•¥ã€æ¿€æ´»æ¦‚ç‡%",
                    "anyOf": [
                      {
                        "type": "number",
                        "minimum": 1
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "cooldown": {
                    "description": "å†·å´: æ¡ç›®æ¿€æ´»å, åœ¨ä¹‹å n æ¡æ¶ˆæ¯å†…ä¸èƒ½å†æ¿€æ´»",
                    "anyOf": [
                      {
                        "type": "number",
                        "minimum": 1
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "delay": {
                    "description": "å»¶è¿Ÿ: èŠå¤©ä¸­è‡³å°‘æœ‰ n æ¥¼æ¶ˆæ¯æ—¶, æ‰èƒ½æ¿€æ´»æ¡ç›®",
                    "anyOf": [
                      {
                        "type": "number",
                        "minimum": 1
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              },
              "group": {
                "description": "åŒ…å«ç»„",
                "type": "object",
                "properties": {
                  "labels": {
                    "description": "ç»„æ ‡ç­¾",
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "use_priority": {
                    "description": "ä½¿ç”¨ä¼˜å…ˆçº§",
                    "default": false,
                    "type": "boolean"
                  },
                  "weight": {
                    "description": "æƒé‡",
                    "default": 100,
                    "type": "number"
                  },
                  "use_scoring": {
                    "description": "ä½¿ç”¨è¯„åˆ†",
                    "default": "same_as_global",
                    "anyOf": [
                      {
                        "type": "boolean"
                      },
                      {
                        "type": "string",
                        "const": "same_as_global"
                      }
                    ]
                  }
                },
                "additionalProperties": false
              },
              "extra": {
                "description": "é¢å¤–å­—æ®µ: ç”¨äºä¸ºé¢„è®¾æç¤ºè¯ç»‘å®šé¢å¤–æ•°æ®",
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {}
              },
              "content": {
                "description": "å†…åµŒçš„æç¤ºè¯å†…å®¹",
                "type": "string"
              },
              "file": {
                "description": "å¤–é“¾çš„æç¤ºè¯æ–‡ä»¶è·¯å¾„",
                "type": "string"
              }
            },
            "required": [
              "name",
              "enabled",
              "strategy",
              "position"
            ],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "folder": {
                "type": "string"
              },
              "entries": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "uid": {
                      "description": "è¯¥æ¡ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦, å¦‚æœä¸è®¾ç½®æˆ–æœ‰é‡å¤åˆ™ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªæ–°çš„",
                      "type": "number"
                    },
                    "enabled": {
                      "type": "boolean"
                    },
                    "strategy": {
                      "description": "æ¿€æ´»ç­–ç•¥: æ¡ç›®åº”è¯¥ä½•æ—¶æ¿€æ´»",
                      "type": "object",
                      "properties": {
                        "type": {
                          "description": "æ¿€æ´»ç­–ç•¥ç±»å‹:\n- constant: å¸¸é‡ğŸ”µ, ä¿—ç§°è“ç¯. åªéœ€è¦æ»¡è¶³ \"å¯ç”¨\"ã€\"æ¿€æ´»æ¦‚ç‡%\" ç­‰åˆ«çš„è¦æ±‚å³å¯.\n- selective: å¯é€‰é¡¹ğŸŸ¢, ä¿—ç§°ç»¿ç¯. é™¤äº†è“ç¯æ¡ä»¶, è¿˜éœ€è¦æ»¡è¶³ `keys` æ‰«ææ¡ä»¶\n- vectorized: å‘é‡åŒ–ğŸ”—. ä¸€èˆ¬ä¸ä½¿ç”¨",
                          "type": "string",
                          "enum": [
                            "constant",
                            "selective",
                            "vectorized"
                          ]
                        },
                        "keys": {
                          "description": "å…³é”®å­—: ç»¿ç¯æ¡ç›®å¿…é¡»åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­æ‰«æåˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªå…³é”®å­—æ‰èƒ½æ¿€æ´»",
                          "minItems": 1,
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "keys_secondary": {
                          "description": "æ¬¡è¦å…³é”®å­—: å¦‚æœè®¾ç½®äº†æ¬¡è¦å…³é”®å­—, åˆ™æ¡ç›®é™¤äº†åœ¨ `keys` ä¸­åŒ¹é…åˆ°ä»»æ„ä¸€ä¸ªå…³é”®å­—å¤–, è¿˜éœ€è¦æŒ‰æ¬¡è¦å…³é”®å­—çš„ `logic` æ»¡è¶³æ¬¡è¦å…³é”®å­—çš„ `keys`",
                          "type": "object",
                          "properties": {
                            "logic": {
                              "description": "æ¬¡è¦å…³é”®å­—é€»è¾‘:\n- and_any: æ¬¡è¦å…³é”®å­—ä¸­ä»»æ„ä¸€ä¸ªå…³é”®å­—èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- and_all: æ¬¡è¦å…³é”®å­—ä¸­æ‰€æœ‰å…³é”®å­—éƒ½èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- not_all: æ¬¡è¦å…³é”®å­—ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…³é”®å­—æ²¡èƒ½åœ¨æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°\n- not_any: æ¬¡è¦å…³é”®å­—ä¸­æ‰€æœ‰å…³é”®å­—éƒ½æ²¡èƒ½æ¬²æ‰«ææ–‡æœ¬ä¸­åŒ¹é…åˆ°",
                              "type": "string",
                              "enum": [
                                "and_any",
                                "and_all",
                                "not_all",
                                "not_any"
                              ]
                            },
                            "keys": {
                              "minItems": 1,
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "logic",
                            "keys"
                          ],
                          "additionalProperties": false
                        },
                        "scan_depth": {
                          "description": "æ‰«ææ·±åº¦: 1 ä¸ºä»…æ‰«ææœ€åä¸€ä¸ªæ¥¼å±‚, 2 ä¸ºæ‰«ææœ€åä¸¤ä¸ªæ¥¼å±‚, ä»¥æ­¤ç±»æ¨",
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "same_as_global"
                            },
                            {
                              "type": "number",
                              "minimum": 1
                            }
                          ]
                        }
                      },
                      "required": [
                        "type"
                      ],
                      "additionalProperties": false
                    },
                    "position": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "description": "æ’å…¥ä½ç½®ç±»å‹:\n- before_character_definition: è§’è‰²å®šä¹‰ä¹‹å‰\n- after_character_definition: è§’è‰²å®šä¹‰ä¹‹å\n- before_example_messages: ç¤ºä¾‹æ¶ˆæ¯ä¹‹å‰\n- after_example_messages: ç¤ºä¾‹æ¶ˆæ¯ä¹‹å\n- before_author_note: ä½œè€…æ³¨é‡Šä¹‹å‰\n- after_author_note: ä½œè€…æ³¨é‡Šä¹‹å\n- at_depth: æ’å…¥åˆ°æŒ‡å®šæ·±åº¦",
                          "type": "string",
                          "enum": [
                            "before_character_definition",
                            "after_character_definition",
                            "before_example_messages",
                            "after_example_messages",
                            "before_author_note",
                            "after_author_note",
                            "at_depth"
                          ]
                        },
                        "role": {
                          "description": "è¯¥æ¡ç›®çš„æ¶ˆæ¯èº«ä»½, ä»…ä½ç½®ç±»å‹ä¸º `'at_depth'` æ—¶æœ‰æ•ˆ",
                          "type": "string",
                          "enum": [
                            "system",
                            "assistant",
                            "user"
                          ]
                        },
                        "depth": {
                          "description": "è¯¥æ¡ç›®è¦æ’å…¥çš„æ·±åº¦, ä»…ä½ç½®ç±»å‹ä¸º `'at_depth'` æ—¶æœ‰æ•ˆ",
                          "type": "number"
                        },
                        "order": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "type",
                        "order"
                      ],
                      "additionalProperties": false
                    },
                    "probability": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "recursion": {
                      "description": "é€’å½’è¡¨ç¤ºæŸä¸–ç•Œä¹¦æ¡ç›®è¢«æ¿€æ´»å, è¯¥æ¡ç›®çš„æç¤ºè¯åˆæ¿€æ´»äº†å…¶ä»–æ¡ç›®",
                      "type": "object",
                      "properties": {
                        "prevent_incoming": {
                          "description": "ç¦æ­¢å…¶ä»–æ¡ç›®é€’å½’æ¿€æ´»æœ¬æ¡ç›®",
                          "type": "boolean"
                        },
                        "prevent_outgoing": {
                          "description": "ç¦æ­¢æœ¬æ¡ç›®é€’å½’æ¿€æ´»å…¶ä»–æ¡ç›®",
                          "type": "boolean"
                        },
                        "delay_until": {
                          "description": "å»¶è¿Ÿåˆ°ç¬¬ n çº§é€’å½’æ£€æŸ¥æ—¶æ‰èƒ½æ¿€æ´»æœ¬æ¡ç›®",
                          "anyOf": [
                            {
                              "type": "number",
                              "minimum": 1
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "additionalProperties": false
                    },
                    "effect": {
                      "type": "object",
                      "properties": {
                        "sticky": {
                          "description": "é»æ€§: æ¡ç›®æ¿€æ´»å, åœ¨ä¹‹å n æ¡æ¶ˆæ¯å†…å§‹ç»ˆæ¿€æ´», æ— è§†æ¿€æ´»ç­–ç•¥ã€æ¿€æ´»æ¦‚ç‡%",
                          "anyOf": [
                            {
                              "type": "number",
                              "minimum": 1
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "cooldown": {
                          "description": "å†·å´: æ¡ç›®æ¿€æ´»å, åœ¨ä¹‹å n æ¡æ¶ˆæ¯å†…ä¸èƒ½å†æ¿€æ´»",
                          "anyOf": [
                            {
                              "type": "number",
                              "minimum": 1
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "delay": {
                          "description": "å»¶è¿Ÿ: èŠå¤©ä¸­è‡³å°‘æœ‰ n æ¥¼æ¶ˆæ¯æ—¶, æ‰èƒ½æ¿€æ´»æ¡ç›®",
                          "anyOf": [
                            {
                              "type": "number",
                              "minimum": 1
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "additionalProperties": false
                    },
                    "group": {
                      "description": "åŒ…å«ç»„",
                      "type": "object",
                      "properties": {
                        "labels": {
                          "description": "ç»„æ ‡ç­¾",
                          "minItems": 1,
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "use_priority": {
                          "description": "ä½¿ç”¨ä¼˜å…ˆçº§",
                          "default": false,
                          "type": "boolean"
                        },
                        "weight": {
                          "description": "æƒé‡",
                          "default": 100,
                          "type": "number"
                        },
                        "use_scoring": {
                          "description": "ä½¿ç”¨è¯„åˆ†",
                          "default": "same_as_global",
                          "anyOf": [
                            {
                              "type": "boolean"
                            },
                            {
                              "type": "string",
                              "const": "same_as_global"
                            }
                          ]
                        }
                      },
                      "additionalProperties": false
                    },
                    "extra": {
                      "description": "é¢å¤–å­—æ®µ: ç”¨äºä¸ºé¢„è®¾æç¤ºè¯ç»‘å®šé¢å¤–æ•°æ®",
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {}
                    },
                    "content": {
                      "description": "å†…åµŒçš„æç¤ºè¯å†…å®¹",
                      "type": "string"
                    },
                    "file": {
                      "description": "å¤–é“¾çš„æç¤ºè¯æ–‡ä»¶è·¯å¾„",
                      "type": "string"
                    }
                  },
                  "required": [
                    "name",
                    "enabled",
                    "strategy",
                    "position"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "folder",
              "entries"
            ]
          }
        ]
      }
    }
  },
  "required": [
    "entries"
  ],
  "additionalProperties": false
}